<div>
	<div class="col-md-12 col-sm-12 ez panel-content">

<script src="{{BaseUrl}}res/core/js/page-report.js"></script>
<script src="{{BaseUrl}}res/core/js/page-report-pnlperformance.js"></script>


	<!-- Nav tabs -->
	<ul class="nav nav-pills nav-replace-title" role="tablist">
		<li role="presentation" class="active">
			<a href="#summary" role="tab" data-toggle="tab" onclick="bkd.title('P&L Summary')">Summary</a>
		</li>
		<li role="presentation">
			<a href="#pnl" role="tab" data-toggle="tab" onclick="bkd.changeTo('customer.channelname', 'P&L by Channels')">Channels</a>
		</li>
		<li role="presentation">
			<a href="#pnl" role="tab" data-toggle="tab" onclick="bkd.changeTo('product.brandname', 'P&L by Brands')">Brands</a>
		</li>
		<li role="presentation">
			<a href="#pnl" role="tab" data-toggle="tab" onclick="bkd.changeTo('customer.areaname', 'P&L by City')">City</a>
		</li>
		<li role="presentation">
			<a href="#pnl" role="tab" data-toggle="tab" onclick="bkd.changeTo('customer.region', 'P&L by Region')">Region</a>
		</li>
		<li role="presentation">
			<a href="#pnl" role="tab" data-toggle="tab" onclick="bkd.changeTo('customer.zone', 'P&L by Zone')">Zone</a>
		</li>
	</ul>

	<!-- Tab panes -->
	<div class="tab-content">
		<div role="tabpanel" class="tab-pane active" id="summary">
<div class="col-md-12 col-sm-12 no-padding hardcore">
	<div class="panel ez no-padding hardcore">
		<div class="panel-heading">
			<h3 class="no-margin">Summary</h3>

			<div class="panel-nav-button" data-bind="visible: !dsbrd.contentIsLoading() && (smry.summaryMode() == 'overview')">
				<div class="form-inline">
					<button class="btn btn-sm btn-primary tooltipster" data-bind="click: dsbrd.refresh" title="Refresh">
						<i class="fa fa-refresh"></i> Refresh
					</button>
					<button class="btn btn-sm btn-info tooltipster" data-bind="click: rpt.toggleFilter" title="Toggle Advanced Filter">
						<i class="fa fa-server"></i> Show Filter
					</button>
				</div>
			</div>

			<div class="panel-nav-button" data-bind="visible: !rs.contentIsLoading() && (smry.summaryMode() == 'pnl-comparison')">
				<div class="form-inline">
					<button class="btn btn-sm btn-primary tooltipster" data-bind="click: rs.refresh" title="Refresh Chart Comparison">
						<i class="fa fa-refresh"></i> Refresh
					</button>
					<button class="btn btn-sm btn-info tooltipster" data-bind="click: rpt.toggleFilter" title="Toggle Advanced Filter">
						<i class="fa fa-server"></i> Show Filter
					</button>
				</div>
			</div>

			<div class="panel-nav-button" data-bind="visible: !rank.contentIsLoading() && (smry.summaryMode() == 'ranking')">
				<div class="form-inline">
					<div class="input-group input-group-sm ez margin-bottom-10 margin-right-5">
						<span class="input-group-addon width-100 align-right">Fiscal Year</span>
						<div class="width-full">
							<select type="text" style="width: 150px;" data-bind="kendoDropDownList: { data: rpt.optionFiscalYears, value: rank.fiscalYear }"></select>
						</div>
					</div>

					<div class="input-group input-group-sm ez margin-bottom-10 margin-right-5">
						<span class="input-group-addon width-100 align-right">Breakdown by</span>
						<div class="width-full">
							<select type="text" style="width: 150px;" data-bind="kendoDropDownList: { data: rank.optionDimensions, dataValueField: 'field', dataTextField: 'name', value: rank.breakdown, filter: 'contains' }"></select>
						</div>
					</div>

					<button class="btn btn-sm btn-primary tooltipster" data-bind="click: rank.refresh" title="Refresh">
						<i class="fa fa-refresh"></i> Refresh
					</button>
					<button class="btn btn-sm btn-info tooltipster" data-bind="click: rpt.toggleFilter" title="Toggle Advanced Filter">
						<i class="fa fa-server"></i> Show Filter
					</button>
				</div>
			</div>
		</div>

		<div class="panel-body" style="min-height: 100px;">
			<ul class="nav nav-pills nav-subs" role="tablist">
				<li role="presentation" class="active">
					<a href="#overview" role="tab" data-toggle="tab" onclick="smry.summaryMode('overview')">Overview</a>
				</li>
				<li role="presentation">
					<a href="#pnl-comparison" role="tab" data-toggle="tab" onclick="smry.summaryMode('pnl-comparison')">P&L Comparison to Net Sales</a>
				</li>
				<li role="presentation">
					<a href="#ranking" role="tab" data-toggle="tab" onclick="smry.summaryMode('ranking')">Ranking</a>
				</li>
			</ul>

			<div class="tab-content">
				<div role="tabpanel" class="tab-pane active" id="overview">
					<div class="filter" data-bind="visible: !dsbrd.contentIsLoading()">
						<div class="form-inline pull-right breakdown-filter">
							<div class="input-group input-group-sm ez margin-bottom-10 margin-right-5">
								<span class="input-group-addon align-right">Fiscal Year</span>
								<div class="width-full">
									<select type="text" style="width: 150px;" data-bind="kendoMultiSelect: { data: rpt.optionFiscalYears, value: dsbrd.fiscalYears }"></select>
								</div>
							</div>

							<div class="input-group input-group-sm ez margin-bottom-10 margin-right-5">
								<span class="input-group-addon align-right">Structure</span>
									<div class="width-full">
										<select type="text" style="width: 150px;" data-bind="kendoDropDownList: { data: dsbrd.optionStructures, dataValueField: 'field', dataTextField: 'name', value: dsbrd.structure }"></select>
									</div>
							</div>
							<div class="clearfix"></div>
						</div>
						<div class="clearfix"></div>

						<div class="form-inline pull-right breakdown-filter">
							<div class="input-group input-group-sm ez margin-bottom-10 margin-right-5">
								<span class="input-group-addon align-right">Breakdown by</span>
								<div class="width-full">
									<select type="text" style="width: 150px;" data-bind="kendoDropDownList: { data: rpt.optionDimensions, dataValueField: 'field', dataTextField: 'name', value: dsbrd.breakdown, select: dsbrd.changeBreakdown, filter: 'contains' }"></select>
								</div>
								<div class="clearfix"></div>
							</div>

							<div class="input-group input-group-sm ez margin-bottom-10 margin-right-5">
								<span class="input-group-addon align-right">Breakdown Value</span>
								<div class="width-full">
									<select type="text" style="width: 150px;" data-bind="kendoMultiSelect: { data: dsbrd.optionBreakdownValues, dataValueField: '_id', dataTextField: 'Name', value: dsbrd.breakdownValue, placeholder: 'Choose value', change: dsbrd.changeBreakdownValue }"></select>
								</div>
								<div class="clearfix"></div>
							</div>

						</div>
						<div class="clearfix"></div>
					</div>
					<div class="clearfix"></div>

					<div data-bind="visible: !dsbrd.contentIsLoading()">
						<div class="grid-dashboard"></div>
						<div class="clearfix"></div>
					</div>
				</div>
				<div role="tabpanel" class="tab-pane" id="pnl-comparison">
					<div class="filter pull-right" data-bind="visible: !rs.contentIsLoading()">
						<div class="form-inline">
							<div  class="input-group input-group-sm ez margin-bottom-10 margin-right-5" data-bind="visible: (rs.breakdownTimeBy() != 'date.fiscal')">
								<span class="input-group-addon width-100 align-right">Fiscal Year</span>
									<div class="width-full">
										<select type="text" style="width: 150px;" data-bind="kendoDropDownList: { data: rpt.optionFiscalYears, value: rs.fiscalYear }"></select>
									</div>
							</div>

							<div class="input-group input-group-sm ez margin-bottom-10 margin-right-5">
								<span class="input-group-addon width-100 align-right">Select</span>
								<div class="width-full">
									<select type="text" style="width: 150px;" data-bind="kendoDropDownList: { data: rs.optionDimensionSelect, dataValueField: 'field', dataTextField: 'name', value: rs.selectedPNL, filter: 'contains' }"></select>
								</div>
								<div class="clearfix"></div>
							</div>

							<div class="input-group input-group-sm ez margin-bottom-10 margin-right-5">
								<span class="input-group-addon width-100 align-right">Breakdown by</span>
								<div class="width-full">
									<select type="text" style="width: 150px;" data-bind="kendoDropDownList: { data: rpt.optionDimensions, dataValueField: 'field', dataTextField: 'name', value: rs.breakdownBy, filter: 'contains' }"></select>
								</div>
								<div class="clearfix"></div>
							</div>
						</div>
					</div>
					<div class="clearfix"></div>

					<div class="filter pull-right" data-bind="visible: !rs.contentIsLoading()">
						<div class="form-inline">
							<div class="input-group input-group-sm ez margin-bottom-10 margin-right-5">
								<span class="input-group-addon width-100 align-right">Time breakdown by</span>
								<div class="width-full">
									<select type="text" style="width: 150px;" data-bind="kendoDropDownList: { data: rs.optionTimeBreakdowns, dataValueField: 'field', dataTextField: 'name', value: rs.breakdownTimeBy, optionLabel: 'No time breakdown', change: rs.changeBreakdownTimeBy }"></select>
								</div>
								<div class="clearfix"></div>
							</div>

							<div class="input-group input-group-sm ez margin-bottom-10 margin-right-5" data-bind="visible: (rs.breakdownTimeBy() != '')">
								<span class="input-group-addon width-100 align-right">Time breakdown value</span>
								<div class="width-full">
									<select type="text" style="width: 150px;" data-bind="kendoMultiSelect: { data: rs.optionTimeSubBreakdowns, dataValueField: 'field', dataTextField: 'name', value: rs.breakdownTimeValue, placeholder: 'Choose breakdown valu' }"></select>
								</div>
								<div class="clearfix"></div>
							</div>
						</div>
						<div class="clearfix"></div>
					</div>
					<div class="clearfix"></div>

					<div class="scatter-view-container" data-bind="visible: !rs.contentIsLoading()" style="padding-bottom: 10px; overflow: scroll;">
						<div class="scatter-view-wrapper"></div>
					</div>
				</div>
				<div role="tabpanel" class="tab-pane" id="ranking">
					<div data-bind="visible: !rank.contentIsLoading()" style="margin-top: 40px;">
						<div class="grid-ranking"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

		</div>
		<div role="tabpanel" class="tab-pane" id="pnl">
<div class="col-md-12 col-sm-12 no-padding hardcore">
	<div class="panel ez no-padding hardcore">
		<div class="panel-heading">
			<h3 class="no-margin" data-bind="text: bkd.title"></h3>
			<div class="panel-nav-button" data-bind="visible: !bkd.contentIsLoading()">
				<div class="form-inline">
					<button class="btn btn-sm btn-primary tooltipster" data-bind="click: bkd.refresh" title="Refresh P&L Analysis">
						<i class="fa fa-refresh"></i> Refresh
					</button>
					<button class="btn btn-sm btn-info tooltipster" data-bind="click: rpt.toggleFilter" title="Toggle Advanced Filter">
						<i class="fa fa-server"></i> Show Filter
					</button>
					<button class="btn btn-sm btn-info tootipster" data-bind="visible: rpt.showExport" onclick="rpt.export('#pnl-analysis', 'P&L Analysis', 'header-content')">
						<i class="fa fa-download"></i> Export as Excel
					</button>
				</div>
			</div>
		</div>

		<div class="panel-body">
			<div class="filter" data-bind="visible: !bkd.contentIsLoading()">
				<div class="form-inline pull-right">
					<div class="input-group input-group-sm ez margin-bottom-10 margin-right-5">
						<span class="input-group-addon align-right">Fiscal Year</span>
						<div class="width-full">
							<select type="text" style="width: 150px;" data-bind="kendoDropDownList: { data: rpt.optionFiscalYears, value: bkd.fiscalYear }"></select>
						</div>
						<div class="clearfix"></div>
					</div>
					<!-- <div class="input-group input-group-sm ez margin-bottom-10 margin-right-5">
						<span class="input-group-addon align-right">Breakdown by</span>
						<div class="width-full">
							<select type="text" style="width: 150px;" data-bind="kendoDropDownList: { data: rpt.optionDimensions, dataValueField: 'field', dataTextField: 'name', value: bkd.breakdownBy, select: bkd.changeBreakdown, filter: 'contains' }"></select>
						</div>
						<div class="clearfix"></div>
					</div> -->
					<div class="input-group input-group-sm ez margin-bottom-10 margin-right-5">
						<span class="input-group-addon align-right">Breakdown Value</span>
						<div class="width-full">
							<select type="text" style="width: 200px;" data-bind="kendoMultiSelect: { data: bkd.optionBreakdownValues, dataValueField: '_id', dataTextField: 'Name', value: bkd.breakdownValue, placeholder: 'Choose value', change: bkd.changeBreakdownValue }"></select>
						</div>
						<div class="clearfix"></div>
					</div>
				</div>
				<div class="clearfix"></div>

				<div class="form-inline pull-right" data-bind="visible: bkd.isBreakdownBranch">
					<div class="input-group input-group-sm ez margin-bottom-10 margin-right-5">
						<span class="input-group-addon align-right">By channels</span>
						<div class="width-full">
							<select type="text" style="width: 170px;" data-bind="kendoMultiSelect: { data: rpt.optionsChannels, dataValueField: '_id', dataTextField: 'Name', value: bkd.breakdownBranch_Channels, placeholder: 'Not used', enabled: bkd.isBreakdownBranchSubEnabled('channel') }"></select>
						</div>
						<div class="clearfix"></div>
					</div>
					<div class="input-group input-group-sm ez margin-bottom-10 margin-right-5">
						<span class="input-group-addon align-right">Or by RD / non RD</span>
						<div class="width-full">
							<select type="text" style="width: 150px;" data-bind="kendoDropDownList: { data: bkd.optionBreakdownRDNonRD, dataValueField: '_id', dataTextField: 'Name', value: bkd.breakdownBranch_ChannelRDNonRD, optionLabel: 'Not used', enabled: bkd.isBreakdownBranchSubEnabled('rd-non-rd') }"></select>
						</div>
						<div class="clearfix"></div>
					</div>
					<div class="input-group input-group-sm ez margin-bottom-10">
						<span class="input-group-addon align-right">Or by sub channel of</span>
						<div class="width-full">
							<select type="text" style="width: 170px;" data-bind="kendoDropDownList: { data: rpt.optionsChannels, dataValueField: '_id', dataTextField: 'Name', value: bkd.breakdownBranch_SubChannel, optionLabel: 'Not used', enabled: bkd.isBreakdownBranchSubEnabled('sub-channel') }"></select>
						</div>
						<div class="clearfix"></div>
					</div>
				</div>
				<div class="clearfix"></div>

				<!-- <div class="form-inline pull-right" data-bind="visible: bkd.isBreakdownChannel"> -->
				<div class="form-inline pull-right">
					<div class="input-group input-group-sm ez margin-bottom-10 margin-right-5">
						<span class="input-group-addon align-right">Breakdown by sub channels</span>
						<div class="width-full">
							<select type="text" style="width: 150px;" data-bind="kendoMultiSelect: { data: rpt.optionsChannels, dataValueField: '_id', dataTextField: 'Name', value: bkd.breakdownChannels, placeholder: 'Choose channels', enabled: ko.computed(function () { return bkd.breakdownChannelLocation() == '' }, bkd) }"></select>
						</div>
						<div class="clearfix"></div>
					</div>
					<div class="input-group input-group-sm ez margin-bottom-10">
						<span class="input-group-addon align-right">Or by location</span>
						<div class="width-full">
							<select type="text" style="width: 150px;" data-bind="kendoDropDownList: { data: bkd.optionBreakdownChannelLocations, dataValueField: '_id', dataTextField: 'Name', value: bkd.breakdownChannelLocation, optionLabel: 'Select location', enabled: ko.computed(function () { return bkd.breakdownChannels().length == 0 }, bkd) }"></select>
						</div>
						<div class="clearfix"></div>
					</div>
				</div>
				<div class="clearfix"></div>
			</div>

			<div data-bind="visible: bkd.contentIsLoading">
				{{template "_loader.html"}}
			</div>

			<div data-bind="visible: !bkd.contentIsLoading()">
				<div class="breakdown-view ez" id="pnl-analysis"></div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="modal-detail-ledger-summary" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	    <div class="modal-dialog" role="document" style="width: 700px;">
	        <div class="modal-content">
	            <div class="modal-header">
	                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	                	<span aria-hidden="true">&times;</span>
	            	</button>
	                <h4 class="modal-title">
	        			Detail
	        		</h4>
	            </div>
	            <div class="modal-body">
					<div data-bind="visible: bkd.popupIsLoading">
						{{template "_loader.html"}}
					</div>
					<div data-bind="visible: !bkd.popupIsLoading()">
	                	<div class="grid-detail"></div>
					</div>
	            </div>
	            <div class="modal-footer">
	                <button type="button" class="btn btn-sm btn-default" data-dismiss="modal">
			        	Close
			        </button>
	            </div>
	        </div>
	    </div>
	</div>
</div>
<div class="clearfix"></div>
		</div>
	</div>


	
	</div>

	{{template "_filter.html"}}
</div>